<head>
    <style>
        .monto {width:80px; }
    </style>
    
    <script type="text/javascript">
        function sumar(){
            const $total = document.getElementById('Total');
            let subtotal = 0;
            [ ...document.getElementsByClassName( "monto" ) ].forEach( function ( element ) {
                if(element.value !== '') {
                subtotal += parseFloat(element.value);
                }
            });
            $total.value = subtotal;
        }
        _('Partida').onchange = function(){
            var id = _('Partida').value.slice(0,3)
            datos.forEach(function(partida){
              if(id===partida.idPartida){
                _('Descripcion').value = partida.nombre
              }
            })
            fetch_data(id);
            
          };
          
    </script>
</head>
<body>
    <div style=" margin: 20px 60px;">     
        <div class="card border-secondary">  
            <div class="card-header">Nueva Partida</div>
            <div class="card-body">
                <form action="/saveAnteproyecto" method="POST">
                    <div class="mb-3">
                        <label style="font-weight: bold; ">Nombre de la actividad: </label>
                            <input id="Actividad" name="Actividad" style="width: 100%;" value="<%=actividad.idActividad%> <%=actividad.nombre%>" readonly>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" style="font-weight: bold;">Partida</label>
                        <select id="Partida" name="Partida" style="width: 100%;">
                            <option selected disabled >NÃºmero de Partida</option>
                            <% results.forEach((partida)=>{ %>
                            <option value="<%=partida.idPartida%>"><%=partida.idPartida%> - <%=partida.nombre%></option>}
                            <% }) %> 
                        </select>
                    </div> 
                    <div class="mb-3">
                        <table id="tabla" class="table table-hover">
                            <thead>
                                <th scope="col">Ene.</th>
                                <th scope="col">Feb.</th>
                                <th scope="col">Mar.</th>
                                <th scope="col">Abr.</th>
                                <th scope="col">May.</th>
                                <th scope="col">Jun.</th>
                                <th scope="col">Jul.</th>
                                <th scope="col">Ago.</th>
                                <th scope="col">Sept.</th>
                                <th scope="col">Oct.</th>
                                <th scope="col">Nov.</th>
                                <th scope="col">Dic.</th>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><input type="number" class="monto" id="Enero" name="Enero" step=".01"  value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Febrero" name="Febrero" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Marzo" name="Marzo" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Abril" name="Abril" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Mayo" name="Mayo" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Junio" name="Junio" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Julio" name="Julio" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Agosto" name="Agosto" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number"class="monto" id="Septiembre" name="Septiembre" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number"class="monto" id="Octubre" name="Octubre" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Noviembre" name="Noviembre" step=".01" value="0"  onkeyup="sumar();"></td>
            
                                    <td><input type="number" class="monto" id="Diciembre" name="Diciembre" step=".01" value="0"  onkeyup="sumar();"></td>
                                    </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mb-3">
                        <label >Total</label>
                        
                        <input id="Total" name="Total" placeholder="0"  readonly>
                    </div>                                   
                    <button type="submit" class="btn btn-success btn-block" style="background-color:#91133C"><i class='bx bx-message-square-check'></i> Guardar</button>
                    <a href="/anteproyecto" class="btn btn-success btn-block" style="background-color:#91133C"><i class='bx bx-message-square-x' ></i> Cancelar</a>
                
                </form>
            </div> 
        </div>        
  </div>
</body>